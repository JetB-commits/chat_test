:root {
  --color-bg: #1a1f24;
  --color-bg-alt: #252b31;
  --color-surface: #2f363d;
  --color-surface-alt: #374151;
  --color-border: #39434d;
  --color-border-alt: #444;
  --color-primary: #3b82f6;
  --color-primary-accent: #2563eb;
  --color-accent: #0078d4;
  --color-danger: #d9534f;
  --color-danger-accent: #c9302c;
  --color-success: #35b467;
  --color-text: #f5f7fa;
  --color-text-muted: #9ca3af;
  --radius-sm: 5px;
  --radius-md: 8px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.35);
  --transition: .25s ease;
}

html, body, #root, .App { height:100%; }
.App { display:flex; flex-direction:column; background:#111; }

.chat-window {
  flex:1 1 auto;
  overflow-y:auto;
  padding: 12px 18px 12px; /* unified padding */
  gap:8px;
  background:#181d21;
  min-height:0; /* allow flex to size */
  display:flex;
  flex-direction:column;
}

.message {
  position: relative;
  padding: 15px 20px;
  border-radius: 20px;
  max-width: 80%;
  word-wrap: break-word;
  line-height: 1.6;
  background: var(--color-surface);
  border: 1px solid rgba(255,255,255,0.05);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(4px);
  animation: fadeInUp .4s ease both;
  font-size: 0.95rem;
  display:inline-block; /* prevent stretching */
  width:fit-content; /* shrink to content */
  max-width: min(68ch, 70%); /* readable width */
  margin: 2px 0; /* tighten vertical space */
}

.message.user {
  background: linear-gradient(135deg, #2f78ff 0%, #2563eb 100%);
  color: #fff;
  align-self:flex-end;
  border-top-right-radius: 8px;
  border-top-left-radius: 18px;
  border-bottom-left-radius:18px;
  border-bottom-right-radius:6px;
}

.message.bot {
  background: linear-gradient(135deg, #303840 0%, #2a3137 100%);
  color: #f5f5f5;
  align-self:flex-start;
  border-top-left-radius: 8px;
  border-top-right-radius:18px;
  border-bottom-right-radius:18px;
  border-bottom-left-radius:6px;
}

.message-content { margin: 0; }

.message-source { margin-top: 4px; opacity: .75; font-style: italic; }
.message-source small { color: var(--color-text-muted); }

.input-form { display: flex; padding: 8px 10px; gap: 8px; background: linear-gradient(90deg,#21282e,#1a2024); border-top: 1px solid #333; }
.input-form input { flex: 1; padding: 12px 14px; border: 1px solid var(--color-border); border-radius: 8px; background: var(--color-surface); color: #f5f5f5; }
.input-form input:focus { outline: none; border-color: var(--color-primary); background:#3d4853; }
.input-form button { padding: 12px 24px; background: #3b82f6; color:#fff; border:none; border-radius:8px; cursor:pointer; font-weight:600; box-shadow:0 2px 4px rgba(0,0,0,.4); }
.input-form button:disabled { opacity:.5; cursor:not-allowed; }

.chat-controls { display:flex; align-items:center; justify-content:space-between; padding:4px 10px; border-top:1px solid #333; }
.reset-button { background: linear-gradient(135deg,#475566,#36414b); color:#fff; border:1px solid var(--color-border); padding:10px 18px; border-radius: var(--radius-md); cursor:pointer; }
.reset-button:disabled { opacity:.5; cursor:not-allowed; }

.loader { width:18px; height:18px; border:3px solid rgba(255,255,255,.15); border-top-color: var(--color-accent); border-radius:50%; animation: spin .8s linear infinite; display:inline-block; margin-left:10px; }

@keyframes spin { to { transform: rotate(360deg);} }
@keyframes fadeInUp { 0% { opacity:0; transform: translateY(8px);} 100% { opacity:1; transform: translateY(0);} }

@media (max-width: 768px) {
  .chat-window { padding:12px; gap:10px; }
  .message { max-width:90%; padding:12px 15px; }
  .input-form { flex-direction:column; padding:10px 12px; }
  .input-form button { width:100%; }
}
